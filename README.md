# Lesta

## Описание

Тестовое задание Lesta Games. Проект работает как в браузере, так и с api. Cервис производит подсчет слов и частотный анализ. Сохранение запросов позволяет обращаться к ранее загруженным документам.

## Важно

Проект работает на Celery/Redis. Для имитации большого файла в загрузку была добавлена задержка в 1 сек. Ее можно отключить в settings.py изменив значение DELAY на False. Главная страница не обновляется автоматически, поэтому ее необходимо обновлять вручную для поддержания актуальности выведенной информации. Это можно делать с помощью иконки W в шапке сайта (переход на главную страницу).

## Установка

Установить проект можно при помощи Docker. Для этого необходимо ввести следующие команды:

* Склонируйте проект:
    ```
    git clone git@github.com:P1oot/Lesta.git
    ```
* Перейти в дерикторию:
    ```
    cd Lesta/
    ```
* Собрать контейнеры и запустить их:
    ```
    docker-compose up -d --build 
    ```
* Провести миграцию:
    ```
    docker-compose exec web python manage.py migrate
    ```
* По желанию создать суперюзера:
    ```
    docker-compose exec web python manage.py createsuperuser
    ```
* Для использования сайта перейти в браузере по ссылке:
    ```
    http://127.0.0.1:8000/
    ```

## Примеры запросов

Загрузка нового текстового документа: "http://127.0.0.1:8000/api/upload/"

Вывести все ранее загруженные файлы: "http://127.0.0.1:8000/api/files/"

Вывести один из загруженных файлов по id: "http://127.0.0.1:8000/api/files/{id}/"

## Возможные неприятности

Иногда сборка проекта может прерваться по вине nltk. Предположительно из-за плохого соединения с сервисом. В решении этой проблемы мне помогал vpn.

## Исповедь 

Проект бы мог работать на gunicorn, но по какой-то причине у меня не получилось подтянуть статику и медиа. Тем не менее, весь код связанный с ним лежит в проекте.
